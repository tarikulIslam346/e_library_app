<div class="page-header">
    <p>Search Video</p>
</div>
<mat-card class="book-search">
    <form (ngSubmit)="onBookSubmit()" #bookForm="ngForm">
        <mat-form-field class="example-form-field">
            <input matInput type="text" placeholder="Serch by book name" [(ngModel)]="bookName" name="bookName">
            <button mat-button *ngIf="bookName" matSuffix mat-icon-button aria-label="Clear" (click)="bookName=''">
          <mat-icon>close</mat-icon>
        </button>
        </mat-form-field>
        <button type="submit" mat-raised-button color="primary">
        <mat-icon>search</mat-icon>
      </button>
    </form>
</mat-card>

<mat-grid-list cols="4" rowHeight="370px" *ngIf="book">
    <mat-grid-tile *ngFor="let b of book;let i=index">
        <mat-card class="example-card">
            <mat-card-header>
                <button mat-icon-button (click)="getBookDetails(b.book_id)">
              <mat-icon color="warn">view_headline</mat-icon>
            </button>
            </mat-card-header>
            <div *ngIf="canView[b.book_id]===1">
                <video *ngIf="b.file && b.file.substring(b.file.lastIndexOf('.') + 1) == 'mp4' " controls controlsList="nodownload" width="220" height="150" controls>
            <source src="{{bookUrl}}{{b.file}}" type="video/mp4">
            Your browser does not support the video tag.
          </video>
                <video *ngIf="b.file && b.file.substring(b.file.lastIndexOf('.') + 1) == 'avi' " controls controlsList="nodownload" width="220" height="150" controls>
            <source src="{{bookUrl}}{{b.file}}" type="video/avi">
            Your browser does not support the video tag.
          </video>
                <video *ngIf="b.file && b.file.substring(b.file.lastIndexOf('.') + 1) == 'flv' " controls controlsList="nodownload" width="220" height="150" controls>
            <source src="{{bookUrl}}{{b.file}}" type="video/flv">
            Your browser does not support the video tag.
          </video>
                <video *ngIf="b.file && b.file.substring(b.file.lastIndexOf('.') + 1) == 'wmv' " controls controlsList="nodownload" width="220" height="150" controls>
            <source src="{{bookUrl}}{{b.file}}" type="video/wmv">
            Your browser does not support the video tag.
          </video>

            </div>
            <div class="no_video_image" *ngIf="canView[b.book_id]===0">
                <img mat-card-image src="{{dummyUrl}}dummy_image.jpg" alt="Photo of a Shiba Inu">
            </div>


            <mat-card-content *ngIf="b.type == 2">
                <h2>{{b.title}}</h2>
                <h4>By - {{b.author}}</h4>
                <p>{{b.description | slice:0:10}}......<span><button mat-button color="accent" (click)="getBookDetails(b.book_id)">read more</button></span></p>
            </mat-card-content>
            <mat-card-actions>
                <button mat-icon-button color="primary" disabled *ngIf="canView[b.book_id]===1">

            <mat-icon>visibility</mat-icon>
          </button>
                <button mat-icon-button color="primary" disabled *ngIf="canDownload[b.book_id]===1">
            <a href="{{bookUrl}}{{b.file}}" target="blank"><mat-icon>get_app</mat-icon></a>
          </button>
                <button mat-icon-button>
            <mat-icon color="primary" (click)="getVedioId(b.book_id)" *ngIf="userService.isEditBookPermission">
              border_color</mat-icon>
          </button>
            </mat-card-actions>
        </mat-card>
    </mat-grid-tile>
</mat-grid-list>
<ngx-loading [show]="loadingbook"></ngx-loading>

