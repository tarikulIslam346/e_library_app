{
  "version": 3,
  "file": "simple-pdf-viewer.umd.min.js",
  "sources": [
    "ng://simple-pdf-viewer/out/libs/simple-pdf-viewer/src/simplePdfViewer.models.ts",
    "ng://simple-pdf-viewer/out/libs/simple-pdf-viewer/src/simplePdfViewer.component.ts"
  ],
  "sourcesContent": [
    "/**\r\n * Enum for searching state\r\n */\r\nexport enum SimpleSearchState {\r\n  FOUND,\r\n  NOT_FOUND,\r\n  WRAPPED,\r\n  PENDING\r\n}\r\n\r\n/**\r\n * PDF Document basic information representation\r\n */\r\nexport class SimpleDocumentInfo {\r\n  constructor(public key: string, public value: string){};\r\n}\r\n\r\n/**\r\n * Representation of the Outline nodes\r\n */\r\nexport class SimpleOutlineNode {\r\n  constructor(public title: string, public dest: any, public items: SimpleOutlineNode[]){};\r\n}\r\n\r\n/**\r\n * Representation of the loading progress\r\n */\r\nexport class SimpleProgressData {\r\n  constructor(public loaded: number, public total: number){};\r\n}\r\n\r\n/**\r\n * Representation of the settings of the search\r\n */\r\nexport class SimpleSearchOptions {\r\n  public static readonly DEFAULT_OPTIONS = new SimpleSearchOptions();\r\n  constructor(public caseSensitive: boolean = false, public highlightAll: boolean = true, public phraseSearch: boolean = true){};\r\n}\r\n\r\n/**\r\n * Representation of the PDF bookmark\r\n */\r\nexport class SimplePDFBookmark {\r\n\r\n  public static readonly EMPTY_BOOKMARK = new SimplePDFBookmark(1, 0.75, 0, 0, 0);\r\n  public static readonly PARAMETER_SEPARATOR: string = '#';\r\n  private static readonly PARAMETER_PAGE: string = 'page';\r\n  private static readonly PARAMETER_ZOOM: string = 'zoom';\r\n  private static readonly PARAMETER_ROTATION: string = 'rotation';\r\n  private static readonly PARAMETER_X: string = 'x';\r\n  private static readonly PARAMETER_Y: string = 'y';\r\n\r\n  constructor(public page: number = 1, public zoom: number = 1,\r\n    public rotation: number = 0, public x: number = 0, public y: number = 0) {\r\n  }\r\n\r\n  /**\r\n   * Build destination object to navigation\r\n   */\r\n  toDestination(): object {\r\n    return {pageNumber: this.page, destArray : [null, {name: 'XYZ'}, this.x, this.y, this.zoom]};\r\n  }\r\n\r\n  /**\r\n   * Build query string to URL\r\n   */\r\n  toQueryString(): string {\r\n    return `${SimplePDFBookmark.PARAMETER_SEPARATOR}` +\r\n      `${SimplePDFBookmark.PARAMETER_PAGE}=${this.page}${SimplePDFBookmark.PARAMETER_SEPARATOR}` +\r\n      `${SimplePDFBookmark.PARAMETER_ZOOM}=${this.zoom}${SimplePDFBookmark.PARAMETER_SEPARATOR}` +\r\n      `${SimplePDFBookmark.PARAMETER_ROTATION}=${this.rotation}${SimplePDFBookmark.PARAMETER_SEPARATOR}` +\r\n      `${SimplePDFBookmark.PARAMETER_X}=${this.x}${SimplePDFBookmark.PARAMETER_SEPARATOR}` +\r\n      `${SimplePDFBookmark.PARAMETER_Y}=${this.y}`;\r\n  }\r\n\r\n  /**\r\n   * Build bookmark obeject from src url\r\n   */\r\n  public static buildSimplePDFBookmark(src: string): SimplePDFBookmark {\r\n    if (src && typeof src === 'string' && src.trim().length > 0) {\r\n      var parts = src.split(SimplePDFBookmark.PARAMETER_SEPARATOR);\r\n      if (parts.length > 0) {\r\n        const bookmark = new SimplePDFBookmark();\r\n        parts.forEach(part => {\r\n          const parameters = part.split(\"=\");\r\n          const paramert_name = parameters[0];\r\n          if (parameters.length === 2 && bookmark.hasOwnProperty(paramert_name)) {\r\n            let paramert_value = 0;\r\n            if (paramert_name === SimplePDFBookmark.PARAMETER_ZOOM) {\r\n              paramert_value = parseFloat(`${parameters[1]}`);\r\n            } else {\r\n              paramert_value = parseInt(`${parameters[1]}`, 10);\r\n            }\r\n            paramert_value = Number.isNaN(paramert_value) ? 0 : paramert_value;\r\n            bookmark[paramert_name] = paramert_value;\r\n          }\r\n        });\r\n        return bookmark;\r\n      }\r\n    }\r\n    return SimplePDFBookmark.EMPTY_BOOKMARK;\r\n  }\r\n}\r\n",
    "/**\r\n * Created by Viktor Hajer on 02/08/2018.\r\n */\r\nimport { Component, ElementRef, EventEmitter, Input, OnInit, Output, OnDestroy } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { SimpleSearchState, SimpleDocumentInfo, SimpleOutlineNode, SimpleProgressData, SimpleSearchOptions, SimplePDFBookmark } from './simplePdfViewer.models';\r\nimport { PDFPromise } from 'pdfjs-dist';\r\n\r\ndeclare var require: any;\r\ndeclare var unescape: any;\r\n\r\nenum ScalePriority {\r\n  FULL,\r\n  WIDTH,\r\n  HEIGHT\r\n}\r\n\r\nif (typeof window !== 'undefined') {\r\n  window['pdfjs-dist/build/pdf'] = require('pdfjs-dist/build/pdf');\r\n  require('pdfjs-dist/web/compatibility');\r\n  require('pdfjs-dist/web/pdf_viewer');\r\n  PDFJS.verbosity = (<any>PDFJS).VERBOSITY_LEVELS.errors;\r\n}\r\n\r\n/**\r\n * Simple PDF Viewer component\r\n */\r\n@Component({\r\n  selector: 'simple-pdf-viewer',\r\n  template: `<div class=\"pdfViewerContainer\" [hidden]=\"!isDocumentLoaded()\"><div class=\"pdfViewer\"></div></div>`,\r\n  styles: [`\r\n  :host /deep/ .pdfViewerContainer {\r\n    overflow: auto;\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    padding: 0;\r\n    margin: 0;\r\n  }\r\n  \r\n  :host /deep/ .textLayer {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    overflow: hidden;\r\n    opacity: 0.2;\r\n    line-height: 1.0;\r\n  }\r\n  \r\n  :host /deep/ .textLayer > div {\r\n    color: transparent;\r\n    position: absolute;\r\n    white-space: pre;\r\n    cursor: text;\r\n    -webkit-transform-origin: 0% 0%;\r\n    -moz-transform-origin: 0% 0%;\r\n    -o-transform-origin: 0% 0%;\r\n    -ms-transform-origin: 0% 0%;\r\n    transform-origin: 0% 0%;\r\n  }\r\n  \r\n  :host /deep/ .textLayer .highlight {\r\n    margin: -1px;\r\n    padding: 1px;\r\n  \r\n    background-color: #002bff;\r\n    border-radius: 4px;\r\n  }\r\n  \r\n  :host /deep/ .textLayer .highlight.begin {\r\n    border-radius: 4px 0px 0px 4px;\r\n  }\r\n  \r\n  :host /deep/ .textLayer .highlight.end {\r\n    border-radius: 0px 4px 4px 0px;\r\n  }\r\n  \r\n  :host /deep/ .textLayer .highlight.middle {\r\n    border-radius: 0px;\r\n  }\r\n  \r\n  :host /deep/ .textLayer .highlight.selected {\r\n    background-color: rgb(0, 100, 0);\r\n  }\r\n  \r\n  :host /deep/ .textLayer ::selection { background: #002bff; }\r\n  :host /deep/ .textLayer ::-moz-selection { background: #002bff; }\r\n  \r\n  :host /deep/ .textLayer .endOfContent {\r\n    display: block;\r\n    position: absolute;\r\n    left: 0px;\r\n    top: 100%;\r\n    right: 0px;\r\n    bottom: 0px;\r\n    z-index: -1;\r\n    cursor: default;\r\n    -webkit-user-select: none;\r\n    -ms-user-select: none;\r\n    -moz-user-select: none;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer section {\r\n    position: absolute;\r\n  }\r\n  \r\n  :host /deep/ .textLayer .endOfContent.active {\r\n    top: 0px;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .linkAnnotation > a {\r\n    position: absolute;\r\n    font-size: 1em;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .linkAnnotation > a:hover {\r\n    opacity: 0.2;\r\n    background: #002bff;\r\n    box-shadow: 0px 2px 10px #002bff;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .linkAnnotation > a /* -ms-a */  {\r\n    background: url(\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\") 0 0 repeat;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .textAnnotation img {\r\n    position: absolute;\r\n    cursor: pointer;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .textWidgetAnnotation input,\r\n  :host /deep/ .annotationLayer .textWidgetAnnotation textarea,\r\n  :host /deep/ .annotationLayer .choiceWidgetAnnotation select,\r\n  :host /deep/ .annotationLayer .buttonWidgetAnnotation.checkBox input,\r\n  :host /deep/ .annotationLayer .buttonWidgetAnnotation.radioButton input {\r\n    background-color: #002bff;\r\n    border: 1px solid transparent;\r\n    box-sizing: border-box;\r\n    font-size: 9px;\r\n    height: 100%;\r\n    padding: 0 3px;\r\n    vertical-align: top;\r\n    width: 100%;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .textWidgetAnnotation textarea {\r\n    font: message-box;\r\n    font-size: 9px;\r\n    resize: none;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .textWidgetAnnotation input[disabled],\r\n  :host /deep/ .annotationLayer .textWidgetAnnotation textarea[disabled],\r\n  :host /deep/ .annotationLayer .choiceWidgetAnnotation select[disabled],\r\n  :host /deep/ .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled],\r\n  :host /deep/ .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled] {\r\n    background: none;\r\n    border: 1px solid transparent;\r\n    cursor: not-allowed;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .textWidgetAnnotation input:hover,\r\n  :host /deep/ .annotationLayer .textWidgetAnnotation textarea:hover,\r\n  :host /deep/ .annotationLayer .choiceWidgetAnnotation select:hover,\r\n  :host /deep/ .annotationLayer .buttonWidgetAnnotation.checkBox input:hover,\r\n  :host /deep/ .annotationLayer .buttonWidgetAnnotation.radioButton input:hover {\r\n    border: 1px solid #000;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .textWidgetAnnotation input:focus,\r\n  :host /deep/ .annotationLayer .textWidgetAnnotation textarea:focus,\r\n  :host /deep/ .annotationLayer .choiceWidgetAnnotation select:focus {\r\n    background: none;\r\n    border: 1px solid transparent;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .textWidgetAnnotation input.comb {\r\n    font-family: monospace;\r\n    padding-left: 2px;\r\n    padding-right: 0;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .textWidgetAnnotation input.comb:focus {\r\n    width: 115%;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .buttonWidgetAnnotation.checkBox input,\r\n  :host /deep/ .annotationLayer .buttonWidgetAnnotation.radioButton input {\r\n    -webkit-appearance: none;\r\n    -moz-appearance: none;\r\n    -ms-appearance: none;\r\n    appearance: none;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .popupWrapper {\r\n    position: absolute;\r\n    width: 20em;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .popup {\r\n    position: absolute;\r\n    z-index: 200;\r\n    max-width: 20em;\r\n    background-color: #FFFF99;\r\n    box-shadow: 0px 2px 5px #333;\r\n    border-radius: 2px;\r\n    padding: 0.6em;\r\n    margin-left: 5px;\r\n    cursor: pointer;\r\n    word-wrap: break-word;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .popup h1 {\r\n    font-size: 1em;\r\n    border-bottom: 1px solid #000000;\r\n    padding-bottom: 0.2em;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .popup p {\r\n    padding-top: 0.2em;\r\n  }\r\n  \r\n  :host /deep/ .annotationLayer .highlightAnnotation,\r\n  :host /deep/ .annotationLayer .underlineAnnotation,\r\n  :host /deep/ .annotationLayer .squigglyAnnotation,\r\n  :host /deep/ .annotationLayer .strikeoutAnnotation,\r\n  :host /deep/ .annotationLayer .fileAttachmentAnnotation {\r\n    cursor: pointer;\r\n  }\r\n  \r\n  :host /deep/ .pdfViewer .canvasWrapper {\r\n    overflow: hidden;\r\n  }\r\n  \r\n  :host /deep/ .pdfViewer .page {\r\n    direction: ltr;\r\n    width: 816px;\r\n    height: 1056px;\r\n    margin: 1px auto -8px auto;\r\n    position: relative;\r\n    overflow: visible;\r\n    border: 9px solid transparent;\r\n    background-clip: content-box;\r\n    border-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAQAAADYWf5HAAAA6UlEQVR4Xl2Pi2rEMAwE16fm1f7/r14v7w4rI0IzLAF7hLxNevBSEMEF5+OilNCsRd8ZMyn+a4NmsOT8WJw1lFbSYgGFzF2bLFoLjTClWjKKGRWpDYAGXUnZ4uhbBUzF3Oe/GG/ue2fn4GgsyXhNgysV2JnrhKEMg4fEZcALmiKbNhBBRFpSyDOj1G4QOVly6O1FV54ZZq8OVygrciDt6JazRgi1ljTPH0gbrPmHPXAbCiDd4GawIjip1TPh9tt2sz24qaCjr/jAb/GBFTbq9KZ7Ke/Cqt8nayUikZKsWZK7Fe6bg5dOUt8fZHWG2BHc+6EAAAAASUVORK5CYII=') 9 9 repeat;\r\n    background-color: white;\r\n  }\r\n  \r\n  :host /deep/ .pdfViewer.removePageBorders .page {\r\n    margin: 0px auto 10px auto;\r\n    border: none;\r\n  }\r\n  \r\n  :host /deep/ .pdfViewer.singlePageView {\r\n    display: inline-block;\r\n  }\r\n  \r\n  :host /deep/ .pdfViewer.singlePageView .page {\r\n    margin: 0;\r\n    border: none;\r\n  }\r\n  \r\n  :host /deep/ .pdfViewer .page canvas {\r\n    margin: 0;\r\n    display: block;\r\n  }\r\n  \r\n  :host /deep/ .pdfViewer .page .loadingIcon {\r\n    position: absolute;\r\n    display: block;\r\n    left: 0;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: url('data:image/gif;base64,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') center no-repeat;\r\n  }  \r\n  `]\r\n})\r\nexport class SimplePdfViewerComponent implements OnInit, OnDestroy {\r\n\r\n  private static readonly CSS_UNITS: number = 96.0 / 72.0;\r\n  private static readonly PAGE_RESIZE_BORDER_HEIGHT: number = 15;\r\n  private static readonly PAGE_RESIZE_BORDER_WIDTH: number = 15;\r\n  private static readonly ZOOM_UNIT = 0.1;\r\n  private static readonly MAX_ZOOM = 5; // max. zoom 500%\r\n  private static readonly MIN_ZOOM = 0.05; // min. zoom 5%\r\n  private static readonly PDF_FINDER_FIND_COMMAND = 'find';\r\n  private static readonly PDF_FINDER_AGAIN_COMMAND = 'findagain';\r\n  private static readonly PDF_VIEWER_DEFAULT_SCALE = 'page-fit';\r\n  private static readonly SNAPSHOT_TPYE = 'image/png';\r\n\r\n  /**\r\n   * Source of the PDF document (Required)\r\n   */\r\n  @Input() src: string | Uint8Array | PDF.PDFSource;\r\n\r\n  /**\r\n   * Page border is displayed or not (Optional)\r\n   */\r\n  @Input() removePageBorders: boolean = false;\r\n\r\n  /**\r\n   * Text layer is displayed or not (Optional)\r\n   */\r\n  @Input() disableTextLayer: boolean = false;\r\n\r\n  @Output('onLoadComplete') onLoadComplete = new EventEmitter<void>();\r\n  @Output('onError') onError = new EventEmitter<any>();\r\n  @Output('onProgress') onProgress = new EventEmitter<SimpleProgressData>();\r\n  @Output('onSearchStateChange') onSearchStateChange = new EventEmitter<SimpleSearchState>();\r\n\r\n  private startAt: SimplePDFBookmark = SimplePDFBookmark.EMPTY_BOOKMARK;\r\n  private loaded: boolean = false;\r\n  private currentPage: number = 1;\r\n  private numberOfPages: number = 1;\r\n  private outline: SimpleOutlineNode[] = [];\r\n  private information: SimpleDocumentInfo[];\r\n  private zoom: number = 1.0;\r\n  private rotation: number = 0;\r\n\r\n  private pdf: PDF.PDFDocumentProxy;\r\n  private pdfLinkService: any;\r\n  private pdfViewer: any;\r\n  private pdfFindController: any;\r\n\r\n  private searching: boolean = false;\r\n  private lastSearchText: string = '';\r\n  private searchPrevious: boolean = false;\r\n  private searchOptions: SimpleSearchOptions = SimpleSearchOptions.DEFAULT_OPTIONS;\r\n\r\n  constructor(private element: ElementRef, private http: HttpClient) {\r\n  }\r\n\r\n  public ngOnInit() {\r\n    if (typeof window !== 'undefined') {\r\n      if (typeof PDFJS.workerSrc !== 'string') {\r\n        const workerUrl = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${ (PDFJS as any).version }/pdf.worker.min.js`;\r\n        PDFJS.workerSrc = workerUrl;\r\n      }\r\n      this.initPDFJS();\r\n      this.openDocument(this.src);\r\n    }\r\n  }\r\n\r\n  public ngOnDestroy() {\r\n    if (this.pdf) { \r\n      this.pdf.destroy();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Open a PDF document at the specified page (at the first page by default)\r\n   * @param src Source of the PDF document\r\n   * @param startAt The bookmark where should start, default: at the first page\r\n   */\r\n  public openDocument(src: string | Uint8Array | PDF.PDFSource, startAt: SimplePDFBookmark = SimplePDFBookmark.EMPTY_BOOKMARK): void {\r\n    this.resetParameters();\r\n    this.startAt = startAt;\r\n    this.setAndParseSrc(src);\r\n    this.loadFile();\r\n  }\r\n\r\n  /**\r\n   * Open a PDF document at the specified page (at the first page by default)\r\n   * @param file The File source of the PDF document\r\n   * @param startAt The bookmark where should start, default: at the first page\r\n   */\r\n  public openFile(file: File, startAt: SimplePDFBookmark = SimplePDFBookmark.EMPTY_BOOKMARK) {\r\n    try {\r\n      const fileReader: FileReader = new FileReader();\r\n      fileReader.onload = () => {\r\n        this.openDocument(new Uint8Array(fileReader.result), startAt);\r\n      };\r\n      fileReader.onerror = (error) => {\r\n        this.onError.emit(error);\r\n        this.loaded = false;\r\n      };\r\n      fileReader.readAsArrayBuffer(file);\r\n    } catch (error) {\r\n      this.onError.emit(error);\r\n      this.loaded = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Open a PDF document at the specified page (at the first page by default)\r\n   * @param url The url of the PDF document\r\n   * @param startAt The bookmark where should start, default: at the first page\r\n   */\r\n  public openUrl(url: string, startAt: SimplePDFBookmark = SimplePDFBookmark.EMPTY_BOOKMARK) {\r\n    this.http.get(url, { responseType: 'arraybuffer' })\r\n      .subscribe((file: ArrayBuffer) => {\r\n        this.openDocument(new Uint8Array(file), startAt);\r\n      }, error => {\r\n        this.onError.emit(error);\r\n        this.loaded = false;\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Returns whether the PDF document is loaded properly\r\n   */\r\n  public isDocumentLoaded(): boolean {\r\n    return this.loaded;\r\n  }\r\n\r\n  private initPDFJS() {\r\n    const container = this.getContainer();\r\n    (<any>PDFJS).disableTextLayer = this.disableTextLayer;\r\n    this.pdfLinkService = new (<any>PDFJS).PDFLinkService();\r\n\r\n    this.pdfViewer = new (<any>PDFJS).PDFSinglePageViewer({\r\n      container: container,\r\n      removePageBorders: this.removePageBorders,\r\n      linkService: this.pdfLinkService,\r\n    });\r\n    this.pdfLinkService.setViewer(this.pdfViewer);\r\n\r\n    this.pdfFindController = new (<any>PDFJS).PDFFindController({\r\n      pdfViewer: this.pdfViewer\r\n    });\r\n    this.pdfViewer.setFindController(this.pdfFindController);\r\n    container.addEventListener('pagesinit', this.pagesinitEventListener.bind(this));\r\n    container.addEventListener('pagechange', this.pagechangeEventListener.bind(this));\r\n    container.addEventListener('updateviewarea', this.updateviewareaEventListener.bind(this));\r\n  }\r\n\r\n  private pagesinitEventListener() {\r\n    this.pdfViewer.currentScaleValue = SimplePdfViewerComponent.PDF_VIEWER_DEFAULT_SCALE;\r\n    this.navigateToBookmark(this.startAt);\r\n    this.onLoadComplete.emit();\r\n  }\r\n\r\n  private pagechangeEventListener() {\r\n    this.currentPage = this.pdfViewer._currentPageNumber;\r\n  }\r\n\r\n  private updateviewareaEventListener() {\r\n    this.zoom = this.pdfViewer._currentScale;\r\n  }\r\n\r\n  private setAndParseSrc(src: string | Uint8Array | PDF.PDFSource) {\r\n    this.src = src;\r\n    if (this.src && typeof this.src === 'string') {\r\n      const parts = this.src.split(SimplePDFBookmark.PARAMETER_SEPARATOR);\r\n      if (parts.length > 1) {\r\n        this.startAt = SimplePDFBookmark.buildSimplePDFBookmark(this.src);\r\n        this.src = parts[0];\r\n      }\r\n    }\r\n  }\r\n\r\n  private loadFile() {\r\n    this.loaded = false;\r\n    if (this.src) {\r\n      if (this.pdf) { \r\n        this.pdf.destroy();\r\n      }\r\n      let progressSrc: any;\r\n      if (typeof this.src === 'string') {\r\n        progressSrc = PDFJS.getDocument({url: this.src, withCredentials: true} as any);\r\n      } else {\r\n        progressSrc = PDFJS.getDocument(this.src as any);\r\n      }\r\n\r\n      // progress\r\n      progressSrc.onProgress = (progressData: PDF.PDFProgressData) => {\r\n        this.onProgress.emit(new SimpleProgressData(progressData.loaded, progressData.total));\r\n      };\r\n\r\n      // loaded\r\n      (<PDF.PDFPromise<PDF.PDFDocumentProxy>>progressSrc.promise).then(pdfDocument => {\r\n        this.pdfViewer.setDocument(pdfDocument);\r\n        this.pdfViewer.currentScaleValue = SimplePdfViewerComponent.PDF_VIEWER_DEFAULT_SCALE;\r\n        this.pdfLinkService.setDocument(pdfDocument, null);\r\n        this.pdf = pdfDocument;\r\n        this.pdf.getOutline().then((nodes: PDF.PDFTreeNode[]) => {\r\n          this.outline = this.mapOutline(nodes);\r\n        });\r\n        this.pdf.getMetadata().then(information => {\r\n          Object.getOwnPropertyNames(information.info).forEach(key => {\r\n            this.information.push(new SimpleDocumentInfo(key, information.info[key]));\r\n          });\r\n          // Meta: info.metadata\r\n        });\r\n        this.numberOfPages = this.pdf.numPages;\r\n        this.loaded = true;\r\n      }, (error: any) => {\r\n        this.resetParameters();\r\n        this.onError.emit(error);\r\n      });\r\n    }\r\n  }\r\n\r\n  private resetParameters() {\r\n    this.information = [];\r\n    this.outline = null;\r\n    this.currentPage = 1;\r\n    this.zoom = 1;\r\n    this.numberOfPages = 1;\r\n    this.startAt = SimplePDFBookmark.EMPTY_BOOKMARK;\r\n    if (this.pdfFindController) {\r\n      this.pdfFindController.reset();\r\n    }\r\n  }\r\n\r\n  private mapOutline(nodes: PDF.PDFTreeNode[]): SimpleOutlineNode[] {\r\n    return nodes ? nodes.map(node => new SimpleOutlineNode(node.title, node.dest, this.mapOutline(node.items)), this) : [];\r\n  }\r\n\r\n  private getContainer(): HTMLElement {\r\n    return this.element.nativeElement.querySelector('div') as HTMLElement;\r\n  }\r\n\r\n  /**\r\n   * Returns the basic information about the PDF document\r\n   */\r\n  public getDocumentInformation(): SimpleDocumentInfo[] {\r\n    return this.loaded && !!this.information ? this.information : [];\r\n  }\r\n\r\n  /**\r\n   * Returns the value of the viewport scale\r\n   */\r\n  public getZoom(): number {\r\n    return this.zoom;\r\n  }\r\n\r\n  /**\r\n   * Returns the value of the viewport scale in %\r\n   */\r\n  public getZoomPercent(): number {\r\n    return Math.floor(this.getZoom() * 1000) / 10;\r\n  }\r\n\r\n  /**\r\n   * Increases the scale of the PDF viewport\r\n   */\r\n  public zoomIn(): void {\r\n    if (this.isDocumentLoaded()) {\r\n      this.setZoom(this.zoom + SimplePdfViewerComponent.ZOOM_UNIT);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Decreases the scale of the PDF viewport\r\n   */\r\n  public zoomOut(): void {\r\n    if (this.isDocumentLoaded()) {\r\n      this.setZoom(this.zoom - SimplePdfViewerComponent.ZOOM_UNIT);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the original viewport scale back to 1.0\r\n   */\r\n  public zoomReset(): void {\r\n    if (this.isDocumentLoaded()) {\r\n      this.setZoom(1.0);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the scale of the PDF viewport to fit in the actual screen\r\n   */\r\n  public zoomFullPage(): void {\r\n    if (this.isDocumentLoaded()) {\r\n      this.pdf.getPage(this.currentPage).then((page: PDF.PDFPageProxy) => {\r\n        const scale = this.getScale(page, ScalePriority.FULL);\r\n        this.setZoom(scale);\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the scale of the PDF viewport to fit in the actual screen (width priority)\r\n   */\r\n  public zoomPageWidth(): void {\r\n    if (this.isDocumentLoaded()) {\r\n      this.pdf.getPage(this.currentPage).then((page: PDF.PDFPageProxy) => {\r\n        const scale = this.getScale(page, ScalePriority.WIDTH);\r\n        this.setZoom(scale);\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the scale of the PDF viewport to fit in the actual screen (height priority)\r\n   */\r\n  public zoomPageHeight(): void {\r\n    if (this.isDocumentLoaded()) {\r\n      this.pdf.getPage(this.currentPage).then((page: PDF.PDFPageProxy) => {\r\n        const scale = this.getScale(page, ScalePriority.HEIGHT);\r\n        this.setZoom(scale);\r\n      });\r\n    }\r\n  }\r\n\r\n  private getScale(page: PDF.PDFPageProxy, priority: ScalePriority = ScalePriority.FULL): number {\r\n    const viewport = page.getViewport(1, this.rotation);\r\n    const offsetHeight = this.getContainer().offsetHeight;\r\n    const offsetWidth = this.getContainer().offsetWidth;\r\n    if (offsetHeight === 0 || offsetWidth === 0) {\r\n      return 1;\r\n    }\r\n    const heightRatio = (offsetHeight - SimplePdfViewerComponent.PAGE_RESIZE_BORDER_HEIGHT) / viewport.height;\r\n    const widthRatio = (offsetWidth - SimplePdfViewerComponent.PAGE_RESIZE_BORDER_WIDTH) / viewport.width;\r\n    let ratio = heightRatio < widthRatio ? heightRatio : widthRatio;\r\n    if (priority !== ScalePriority.FULL) {\r\n      ratio = priority === ScalePriority.WIDTH ? widthRatio : heightRatio;\r\n    }\r\n    const zoom = 1;\r\n    return Math.floor(zoom * ratio / SimplePdfViewerComponent.CSS_UNITS * 100) / 100;\r\n  }\r\n\r\n  /**\r\n   * Set the zoom of the document in double\r\n   * @param scale The zoom value in double\r\n   */\r\n  public setZoom(scale: number): void {\r\n    if (this.isDocumentLoaded() && typeof scale === 'number') {\r\n      const normalizedScale = this.normalizeScale(scale);\r\n      this.pdfViewer._setScale(normalizedScale, false);\r\n      this.zoom = normalizedScale;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the zoom of the document in percent\r\n   * @param zoom The scale value in percent\r\n   */\r\n  public setZoomInPercent(zoom: number): void {\r\n    if (this.isDocumentLoaded() && typeof zoom === 'number') {\r\n      this.setZoom(zoom / 100);\r\n    }\r\n  }\r\n\r\n  private normalizeScale(scale): number {\r\n    let normalizedScale = Math.round(scale * 1000)/1000;\r\n    if (scale > SimplePdfViewerComponent.MAX_ZOOM) {\r\n      normalizedScale = SimplePdfViewerComponent.MAX_ZOOM;\r\n    } else if (scale < SimplePdfViewerComponent.MIN_ZOOM) {\r\n      normalizedScale = SimplePdfViewerComponent.MIN_ZOOM;\r\n    }\r\n    return normalizedScale;\r\n  }\r\n\r\n  /**\r\n   * Starts case sensitive/insensitive text search and navigate to the first match (from the actual page)\r\n   * @param text searched text\r\n   * @param searchOptions set true to use case sensitive searching (false by default)\r\n   */\r\n  public search(text: string, searchOptions: SimpleSearchOptions = SimpleSearchOptions.DEFAULT_OPTIONS): void {\r\n    if (this.isDocumentLoaded()) {\r\n      const searchText = text ? text.trim() : '';\r\n      if (!searchText) {\r\n        return;\r\n      }\r\n      this.lastSearchText = text;\r\n      this.searchPrevious = false;\r\n      this.searchOptions = searchOptions;\r\n      this.pdfFindController.onUpdateResultsCount = this.onUpdateResultsCount.bind(this);\r\n      this.pdfFindController.onUpdateState = this.onUpdateState.bind(this);\r\n      this.pdfFindController.executeCommand(SimplePdfViewerComponent.PDF_FINDER_FIND_COMMAND, {\r\n        caseSensitive: this.searchOptions.caseSensitive,\r\n        findPrevious: false,\r\n        highlightAll: this.searchOptions.highlightAll,\r\n        phraseSearch: this.searchOptions.phraseSearch,\r\n        query: searchText\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Navigates to the next search match if there were multiple hits\r\n   */\r\n  public nextMatch(): void {\r\n    this.stepMatch(false);\r\n  }\r\n\r\n  /**\r\n   * Navigates to the previous search match if there were multiple hits\r\n   */\r\n  public previousMatch(): void {\r\n    this.stepMatch(true);\r\n  }\r\n\r\n  private stepMatch(findPrevious: boolean): void {\r\n    if (this.isDocumentLoaded() && this.getNumberOfMatches() > 1) {\r\n      if (this.searchPrevious !== findPrevious) {\r\n        this.searchPrevious = findPrevious;\r\n        this.searchAgain();\r\n      } else {\r\n        this.pdfFindController.nextMatch();\r\n        this.currentPage = this.pdfViewer._currentPageNumber;\r\n      }\r\n    }\r\n  }\r\n\r\n  private searchAgain(): void {\r\n    if (this.isDocumentLoaded()) {\r\n      this.pdfFindController.executeCommand(SimplePdfViewerComponent.PDF_FINDER_AGAIN_COMMAND, {\r\n        caseSensitive: this.searchOptions.caseSensitive,\r\n        findPrevious: this.searchPrevious,\r\n        highlightAll: this.searchOptions.highlightAll,\r\n        phraseSearch: this.searchOptions.phraseSearch,\r\n        query: this.lastSearchText\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the number of the search hits\r\n   */\r\n  public getNumberOfMatches(): number {\r\n    if (this.isDocumentLoaded()) {\r\n      return this.pdfFindController.matchCount;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   * Returns whether there is a matched item\r\n   */\r\n  public hasMatches(): boolean {\r\n    return this.getNumberOfMatches() > 0;\r\n  }\r\n\r\n  /**\r\n   * Returns whether the search is in-progress\r\n   */\r\n  public isSearching(): boolean {\r\n    return this.searching;\r\n  }\r\n\r\n  private onUpdateResultsCount(): void {\r\n    this.pdfFindController.onUpdateResultsCount = null;\r\n    this.currentPage = this.pdfViewer._currentPageNumber;\r\n  }\r\n\r\n  private onUpdateState(state: SimpleSearchState): void {\r\n    this.onSearchStateChange.emit(state);\r\n    this.searching = state === SimpleSearchState.PENDING;\r\n    if (!this.searching) {\r\n      this.pdfFindController.onUpdateState = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the number of the actual page\r\n   */\r\n  public getCurrentPage(): number {\r\n    return this.currentPage;\r\n  }\r\n\r\n  /**\r\n   * Returns the number of the pages\r\n   */\r\n  public getNumberOfPages(): number {\r\n    return this.numberOfPages;\r\n  }\r\n\r\n  /**\r\n   * Returns outline / table of content in tree structure\r\n   */\r\n  public getOutline(): SimpleOutlineNode[] {\r\n    return this.hasOutline() ? this.outline : [];\r\n  }\r\n\r\n  /**\r\n   * Returns whether the outline is available\r\n   */\r\n  public hasOutline(): boolean {\r\n    return this.loaded && !!this.outline && !!this.outline.length;\r\n  }\r\n\r\n  /**\r\n   * Navigates to the specified (outline) destination/chapter\r\n   * @param destination the destination object of the outline item\r\n   */\r\n  public navigateToChapter(destination: any): void {\r\n    if (this.isDocumentLoaded()) {\r\n      // TODO: input validation\r\n      this.pdfLinkService.navigateTo(destination);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Navigates to the first page\r\n   */\r\n  public firstPage(): void {\r\n    if (this.isDocumentLoaded()) {\r\n      this.currentPage = 1;\r\n      this.navigateToPage(this.currentPage);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Navigates to the last page\r\n   */\r\n  public lastPage(): void {\r\n    if (this.isDocumentLoaded()) {\r\n      this.currentPage = this.getNumberOfPages();\r\n      this.navigateToPage(this.currentPage);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Navigates to the next page\r\n   */\r\n  public nextPage(): void {\r\n    if (this.isDocumentLoaded()) {\r\n      this.currentPage++;\r\n      this.navigateToPage(this.currentPage, 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Navigates to the previous page\r\n   */\r\n  public prevPage(): void {\r\n    if (this.isDocumentLoaded()) {\r\n      this.currentPage--;\r\n      this.navigateToPage(this.currentPage, this.numberOfPages);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Navigates to the specified page\r\n   * @param page the number of the page\r\n   * @param pageDefault\r\n   */\r\n  public navigateToPage(page: number, pageDefault?: number): void {\r\n    if (this.isDocumentLoaded()) {\r\n      const pageInt = parseInt(`${page}`, 10);\r\n      this.currentPage = pageInt ? pageInt : this.currentPage;\r\n      if (this.currentPage > this.numberOfPages) {\r\n        this.currentPage = pageDefault ? pageDefault : this.numberOfPages;\r\n      }\r\n      if (this.currentPage <= 0) {\r\n        this.currentPage = pageDefault ? pageDefault : 1;\r\n      }\r\n      this.pdfViewer.scrollPageIntoView({\r\n        pageNumber: this.currentPage\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets the rotation to the default 0 degree\r\n   */\r\n  public resetRotation(): void {\r\n    this.rotate(0);\r\n  }\r\n\r\n  /**\r\n   * Turns left the document with 90 degree (counterclockwise)\r\n   */\r\n  public turnLeft(): void {\r\n    this.rotate(this.rotation - 90);\r\n  }\r\n\r\n  /**\r\n   * Turns right the document with 90 degree (clockwise)\r\n   */\r\n  public turnRight(): void {\r\n    this.rotate(this.rotation + 90);\r\n  }\r\n\r\n  /**\r\n   * Returns the actual rotation value in degree\r\n   */\r\n  public getRotation(): number {\r\n    return this.rotation;\r\n  }\r\n\r\n  private rotate(angle: number = 90): void {\r\n    if (this.isDocumentLoaded()) {\r\n      this.rotation = parseInt(`${angle}`, 10);\r\n      if (this.rotation === 270) {\r\n        this.rotation = -90;\r\n      } else if (this.rotation === -180) {\r\n        this.rotation = 180;\r\n      }\r\n      this.pdfViewer.pagesRotation = this.rotation;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates bookmark object based on the current viewport and page number. \r\n   * The object can be passed to the #navigateToBookmark method. \r\n   */\r\n  public createBookmark(): Promise<SimplePDFBookmark> {\r\n    if(!this.isDocumentLoaded()) {\r\n      return Promise.reject('Document is not loaded');\r\n    }\r\n    const pagePromise = <Promise<PDF.PDFPageProxy>><any>this.pdf.getPage(this.currentPage);\r\n    return pagePromise.then((page: PDF.PDFPageProxy) => {\r\n      const viewport = page.getViewport(1, this.rotation);\r\n      const container = this.getContainer();\r\n      let x = container.scrollLeft / container.scrollWidth * viewport.width;\r\n      let y = (container.scrollHeight - container.scrollTop) / container.scrollHeight * viewport.height;\r\n      if(this.rotation === 90) {\r\n        y = container.scrollTop / container.scrollHeight * viewport.height;\r\n        let tmp = x;\r\n        x = y;\r\n        y = tmp;\r\n      } else if (this.rotation === 180) {\r\n        x = (container.scrollWidth - container.scrollLeft) / container.scrollWidth * viewport.width;\r\n        y = container.scrollTop / container.scrollHeight * viewport.height;\r\n      } else if (this.rotation === -90) {\r\n        x = (container.scrollWidth - container.scrollLeft) / container.scrollWidth * viewport.width;\r\n        let tmp = x;\r\n        x = y;\r\n        y = tmp;\r\n      }\r\n      x = Math.round(x);\r\n      y = Math.round(y);\r\n      return new SimplePDFBookmark(this.currentPage, this.zoom, this.rotation, x, y);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Navigates to the specified bookmark\r\n   */\r\n  public navigateToBookmark(bookmark: SimplePDFBookmark) {\r\n    if(this.isDocumentLoaded() && !!bookmark) {\r\n      this.rotate(bookmark.rotation);\r\n      this.pdfViewer.scrollPageIntoView(bookmark.toDestination());\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create a snapshot image (PNG) based about the current page\r\n   * @param scale the value of the viewport scale, it is 1 by default\r\n   */\r\n  public getPageSnapshot(scale: number = 1): Promise<File> {\r\n    if (this.isDocumentLoaded()) {\r\n      const pagePromise = <Promise<PDF.PDFPageProxy>><any>this.pdf.getPage(this.currentPage);\r\n      return pagePromise.then((page: PDF.PDFPageProxy) => {\r\n        const viewport = page.getViewport(scale, 0);\r\n        const canvas = <HTMLCanvasElement><any>document.createElement('canvas');\r\n        const context = canvas.getContext('2d');\r\n        canvas.height = viewport.height;\r\n        canvas.width = viewport.width;\r\n        const task = <Promise<any>><any>page.render({canvasContext: context, viewport: viewport});\r\n        return task.then(() =>\r\n          this.dataURItoFile(canvas.toDataURL(SimplePdfViewerComponent.SNAPSHOT_TPYE)));\r\n      });\r\n    }\r\n    return Promise.reject('Document is not loaded');\r\n  }\r\n    \r\n  private dataURItoFile(dataURI: string): File {\r\n    let byteString;\r\n    if (dataURI.split(',')[0].indexOf('base64') >= 0) {\r\n      byteString = atob(dataURI.split(',')[1]);\r\n    } else {\r\n      byteString = unescape(dataURI.split(',')[1]);\r\n    }\r\n    const mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\r\n    const ia = new Uint8Array(byteString.length);\r\n    for (let i = 0; i < byteString.length; i++) {\r\n      ia[i] = byteString.charCodeAt(i);\r\n    }\r\n    const blob = new Blob([ia], { type: mimeString });\r\n    const b: any = blob;\r\n    b.lastModifiedDate = new Date();\r\n    b.name = 'screen.png';\r\n    return <File>blob;\r\n  }\r\n}\r\n"
  ],
  "names": [
    "this",
    "key",
    "value",
    "SimpleOutlineNode",
    "title",
    "dest",
    "items",
    "loaded",
    "total",
    "caseSensitive",
    "highlightAll",
    "phraseSearch",
    "SimplePDFBookmark",
    "page",
    "zoom",
    "rotation",
    "x",
    "y",
    "prototype",
    "toDestination",
    "pageNumber",
    "destArray",
    "name",
    "PARAMETER_PAGE",
    "PARAMETER_SEPARATOR",
    "PARAMETER_ZOOM",
    "PARAMETER_ROTATION",
    "PARAMETER_X",
    "PARAMETER_Y",
    "buildSimplePDFBookmark",
    "src",
    "trim",
    "length",
    "parts",
    "split",
    "bookmark_1",
    "forEach",
    "part",
    "parameters",
    "paramert_name",
    "hasOwnProperty",
    "paramert_value",
    "parseFloat",
    "Number",
    "isNaN",
    "EMPTY_BOOKMARK",
    "ScalePriority",
    "FULL",
    "WIDTH",
    "require",
    "PDFJS",
    "verbosity",
    "VERBOSITY_LEVELS",
    "errors",
    "SimplePdfViewerComponent",
    "element",
    "http",
    "removePageBorders",
    "disableTextLayer",
    "onLoadComplete",
    "EventEmitter",
    "onError",
    "onProgress",
    "onSearchStateChange",
    "startAt",
    "outline",
    "searching",
    "lastSearchText",
    "searchPrevious",
    "searchOptions",
    "SimpleSearchOptions",
    "DEFAULT_OPTIONS",
    "workerSrc",
    "workerUrl",
    "version",
    "ngOnDestroy",
    "pdf",
    "destroy",
    "resetParameters",
    "setAndParseSrc",
    "loadFile",
    "openFile",
    "file",
    "_this",
    "fileReader_1",
    "readAsArrayBuffer",
    "error",
    "emit",
    "openUrl",
    "url",
    "openDocument",
    "Uint8Array",
    "isDocumentLoaded",
    "initPDFJS",
    "container",
    "linkService",
    "pdfLinkService",
    "pdfViewer",
    "setFindController",
    "pdfFindController",
    "addEventListener",
    "pagesinitEventListener",
    "bind",
    "pagechangeEventListener",
    "currentPage",
    "_currentPageNumber",
    "progressSrc",
    "getDocument",
    "withCredentials",
    "progressData",
    "SimpleProgressData",
    "then",
    "pdfDocument",
    "setDocument",
    "currentScaleValue",
    "PDF_VIEWER_DEFAULT_SCALE",
    "getMetadata",
    "information",
    "Object",
    "getOwnPropertyNames",
    "info",
    "push",
    "SimpleDocumentInfo",
    "numberOfPages",
    "numPages",
    "getZoomPercent",
    "Math",
    "floor",
    "getZoom",
    "zoomIn",
    "setZoom",
    "ZOOM_UNIT",
    "zoomOut",
    "zoomFullPage",
    "zoomPageHeight",
    "getPage",
    "scale",
    "getScale",
    "HEIGHT",
    "priority",
    "viewport",
    "getViewport",
    "offsetHeight",
    "getContainer",
    "offsetWidth",
    "ratio",
    "widthRatio",
    "heightRatio",
    "CSS_UNITS",
    "normalizedScale",
    "normalizeScale",
    "_setScale",
    "round",
    "MAX_ZOOM",
    "MIN_ZOOM",
    "searchText",
    "text",
    "onUpdateResultsCount",
    "query",
    "nextMatch",
    "stepMatch",
    "previousMatch",
    "findPrevious",
    "getNumberOfMatches",
    "executeCommand",
    "PDF_FINDER_AGAIN_COMMAND",
    "matchCount",
    "hasMatches",
    "state",
    "SimpleSearchState",
    "PENDING",
    "getNumberOfPages",
    "navigateToChapter",
    "destination",
    "firstPage",
    "lastPage",
    "nextPage",
    "navigateToPage",
    "prevPage",
    "pageInt",
    "scrollPageIntoView",
    "turnLeft",
    "rotate",
    "turnRight",
    "angle",
    "parseInt",
    "pagesRotation",
    "createBookmark",
    "tmp",
    "scrollTop",
    "scrollHeight",
    "height",
    "Promise",
    "reject",
    "getPageSnapshot",
    "canvas",
    "document",
    "createElement",
    "context",
    "getContext",
    "width",
    "render",
    "canvasContext",
    "dataURItoFile",
    "dataURI",
    "byteString",
    "indexOf",
    "unescape"
  ],
  "mappings": "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"
}
